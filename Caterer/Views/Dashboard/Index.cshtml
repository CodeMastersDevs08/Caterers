@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_SuperAdminDashboard.cshtml";
}
<div class="container-fluid py-2">
    <div class="row">
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-uppercase font-weight-bold">Total Orders</p>
                                <h5 class="font-weight-bolder">
                                    @ViewBag.TotalOrders
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
                                <i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Accepted Orders Card -->
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-uppercase font-weight-bold">Accepted Orders</p>
                                <h5 class="font-weight-bolder">
                                    @ViewBag.AcceptedOrdersCount
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
                                <i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Total GrandTotal Card -->
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-uppercase font-weight-bold"> Grand Total</p>
                                <h5 class="font-weight-bolder" >
                                    @ViewBag.TotalGrandTotal.ToString("C")  
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-danger shadow-danger text-center rounded-circle">
                                <i class="ni ni-world text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-sm-6 mb-xl-0 mb-4">
            <div class="card">
                <div class="card-body p-3">
                    <div class="row">
                        <div class="col-8">
                            <div class="numbers">
                                <p class="text-sm mb-0 text-uppercase font-weight-bold"> Most Sold Menu</p>
                                <h5 class="font-weight-bolder">

                                    <p>
                                        @if (ViewBag.MostSoldItemName != null)
                                        {
                                            <span class="text-warning font-weight-bolder">@ViewBag.MostSoldItemName</span>
                                        }
                                        else
                                        {
                                            <span class="text-muted">No data available</span>
                                        }
                                    </p>
                                </h5>
                            </div>
                        </div>
                        <div class="col-4 text-end">
                            <div class="icon icon-shape bg-gradient-primary shadow-primary text-center rounded-circle">
                                <i class="ni ni-money-coins text-lg opacity-10" aria-hidden="true"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">Orders Status</h5>
                </div>
                <div class="card-body">
                    <div id="rope-chart"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">Minimum Products</h5>
                </div>
                <div class="card-body">
                    <div id="bar-chart"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">Top Items </h5>
                </div>
                <div class="card-body">
                    <div id="pie-chart"></div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">Working Hours</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped">
                            <thead class="thead-dark">
                                <tr>
                                    <th class="text-center">Day</th>
                                    <th class="text-center">Start Time</th>
                                    <th class="text-center">End Time</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="text-center">Monday</td>
                                    <td class="text-center">@(Model?.MondayStart != null ? Model.MondayStart.Value.ToString("hh:mm tt") : "12:00")</td>
                                    <td class="text-center">@(Model?.MondayEnd != null ? Model.MondayEnd.Value.ToString("hh:mm tt") : "12:00")</td>
                                </tr>
                                <tr>
                                    <td class="text-center">Tuesday</td>
                                    <td class="text-center">@(Model?.TuesdayStart != null ? Model.TuesdayStart.Value.ToString("hh:mm tt") : "12:00")</td>
                                    <td class="text-center">@(Model?.TuesdayEnd != null ? Model.TuesdayEnd.Value.ToString("hh:mm tt") : "12:00")</td>
                                </tr>
                                <tr>
                                    <td class="text-center">Wednesday</td>
                                    <td class="text-center">@(Model?.WednesdayStart != null ? Model.WednesdayStart.Value.ToString("hh:mm tt") : "12:00")</td>
                                    <td class="text-center">@(Model?.WednesdayEnd != null ? Model.WednesdayEnd.Value.ToString("hh:mm tt") : "12:00")</td>
                                </tr>
                                <tr>
                                    <td class="text-center">Thursday</td>
                                    <td class="text-center">@(Model?.ThursdayStart != null ? Model.ThursdayStart.Value.ToString("hh:mm tt") : "12:00")</td>
                                    <td class="text-center">@(Model?.ThursdayEnd != null ? Model.ThursdayEnd.Value.ToString("hh:mm tt") : "12:00")</td>
                                </tr>
                                <tr>
                                    <td class="text-center">Friday</td>
                                    <td class="text-center">@(Model?.FridayStart != null ? Model.FridayStart.Value.ToString("hh:mm tt") : "12:00")</td>
                                    <td class="text-center">@(Model?.FridayEnd != null ? Model.FridayEnd.Value.ToString("hh:mm tt") : "12:00")</td>
                                </tr>
                                <tr>
                                    <td class="text-center">Saturday</td>
                                    <td class="text-center">@(Model?.SaturdayStart != null ? Model.SaturdayStart.Value.ToString("hh:mm tt") : "12:00")</td>
                                    <td class="text-center">@(Model?.SaturdayEnd != null ? Model.SaturdayEnd.Value.ToString("hh:mm tt") : "12:00")</td>
                                </tr>
                                <tr>
                                    <td class="text-center">Sunday</td>
                                    <td class="text-center">@(Model?.SundayStart != null ? Model.SundayStart.Value.ToString("hh:mm tt") : "12:00")</td>
                                    <td class="text-center">@(Model?.SundayEnd != null ? Model.SundayEnd.Value.ToString("hh:mm tt") : "12:00")</td>
                                </tr>
                                <tr></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">All Restaurants</h5>
                </div>
                <div class="card-body" style="max-height: 400px; overflow-y: auto;">
                    <div class="table-responsive">
                        <table class="table table-bordered table-striped">
                            <thead class="thead-dark">
                                <tr>
                                    <th class="text-center">RestaurantId</th>
                                    <th class="text-center">RestaurantName</th>
                                    <th class="text-center">CurrentPlan</th>
                                    <th class="text-center">Address</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var restaurant in ViewBag.AllRestaurants)
                                {
                                    <tr>
                                        <td class="text-center">@restaurant.RestaurantId</td>
                                        <td class="text-center">@restaurant.RestaurantName</td>
                                        <td class="text-center">@restaurant.CurrentPlan</td>
                                        <td class="text-center">@restaurant.Address</td>
                                    </tr>
                                }
                                 <tr></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">Scatter Plot</h5>
                </div>
                <div class="card-body">
                    <div id="scatter-plot-chart"></div>
                </div>
            </div>
        </div>
       </div>
       </div>
        <div class="col-md-12">
            <div class="card mb-4">
                <div class="card-header">
                    <h5 class="card-title">Customer Reviews</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <!-- Individual Review Cards -->
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-subtitle mb-2 text-muted">Tom Sims</h6>
                                    <p class="card-text">
                                        Mumma’s kitchen is a new cloud kitchen in chennai thaat totally works over WhatsApp or Insta messaging. I haven’t seen them on Zomato or Swiggy yet. It is a family […]
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-subtitle mb-2 text-muted">Alen Solly</h6>
                                    <p class="card-text">
                                        Today we had a chance to try lunch at Yumm Factory, Jaag Hotel in T. Nagar. The Yumm Factory, Jaag Hotel (T.Nagar): One of the best places in Chennai to […]
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
@section scripts {
    <script>
        // Rope Chart
        var ropeChartData = @Html.Raw(Json.Serialize(ViewBag.LineChartData));
        var ropeChartOptions = {
            chart: {
                height: 350,
                type: 'line',
            },
            series: [{
                name: 'Orders per day',
                data: Object.values(ropeChartData)
            }],
            xaxis: {
                type: 'datetime',
                categories: Object.keys(ropeChartData).map(date => new Date(date).getTime())
            },
            stroke: {
                width: 5,
                curve: 'smooth'
            },
            markers: {
                size: 0
            },
            colors: ['#5E72E4'],
            title: {
                text: 'Orders Trend',
                align: 'center',
                style: {
                    fontSize: '18px',
                    color: '#333'
                }
            }
        };
        var ropeChart = new ApexCharts(document.querySelector("#rope-chart"), ropeChartOptions);
        ropeChart.render();
        // Bar Chart
        var barChartData = @Html.Raw(Json.Serialize(ViewBag.BarChartData));
        var barChartOptions = {
            chart: {
                height: 350,
                type: 'bar',
            },
            series: [{
                name: 'Quantity',
                data: Object.values(barChartData)
            }],
            xaxis: {
                categories: Object.keys(barChartData)
            },
            colors: ['#34B8E4'],  
            title: {
                text: 'Product Quantities',
                align: 'center',
                style: {
                    fontSize: '18px',
                    color: '#333'
                }
            }
        }
        var barChart = new ApexCharts(document.querySelector("#bar-chart"), barChartOptions);
        barChart.render();
        // Scatter plots
        var scatterPlotData = @Html.Raw(Json.Serialize(ViewBag.ScatterPlotData));
        var scatterPlotOptions = {
            chart: {
                height: 350,
                type: 'scatter',
                zoom: {
                    enabled: true,
                    type: 'xy'
                }
            },
            series: [{
                name: 'Scatter Plot',
                data: scatterPlotData
            }],
            xaxis: {
                tickAmount: 10,
                labels: {
                    formatter: function (val) {
                        return parseFloat(val).toFixed(2);
                    }
                }
            },
            yaxis: {
                tickAmount: 7
            },
            markers: {
                size: 8
            },
            colors: ['#FF5733'],
            title: {
                text: 'Scatter Plot',
                align: 'center',
                style: {
                    fontSize: '18px',
                    color: '#333'
                }
            }
        }
        var scatterPlotChart = new ApexCharts(document.querySelector("#scatter-plot-chart"), scatterPlotOptions);
        scatterPlotChart.render();
        // Pie Chart
        document.addEventListener("DOMContentLoaded", function () {
            var pieChartData = @Html.Raw(Json.Serialize(ViewBag.PieChartData));
            var pieChartOptions = {
                chart: {
                    height: 350,
                    type: 'pie',
                },
                series: Object.values(pieChartData),
                labels: Object.keys(pieChartData),
                colors: ['#5E72E4', '#34B8E4', '#3CB44B', '#FFD700', '#FF5733'], 
                title: {
                    text: 'Distribution of Sales',
                    align: 'center',
                    style: {
                        fontSize: '18px',
                        color: '#333'
                    }
                }
            };
            var pieChart = new ApexCharts(document.querySelector("#pie-chart"), pieChartOptions);
            pieChart.render();
        });
    </script>
}

        
